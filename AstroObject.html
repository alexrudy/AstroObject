

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>4. Custom Object Basics: FITSObject &mdash; AstroObject 0.3.1 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.3.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="AstroObject 0.3.1 documentation" href="index.html" />
    <link rel="next" title="6. Image Objects and Storage AstroImage" href="AstroImage.html" />
    <link rel="prev" title="3. AstroObject API" href="api.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="AstroImage.html" title="6. Image Objects and Storage AstroImage"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="api.html" title="3. AstroObject API"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">AstroObject 0.3.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <span class="target" id="module-AstroObject.AstroObjectBase"></span><div class="section" id="custom-object-basics-fitsobject">
<h1>4. Custom Object Basics: <a class="reference internal" href="#AstroObject.AstroObjectBase.FITSObject" title="AstroObject.AstroObjectBase.FITSObject"><tt class="xref py py-class docutils literal"><span class="pre">FITSObject</span></tt></a><a class="headerlink" href="#custom-object-basics-fitsobject" title="Permalink to this headline">¶</a></h1>
<p>The Base API was introduced in version 0.2.1 to facilitate the creation and use of basic template classes.</p>
<p>The FITSObject container is useful for handling many data frames. It can be sub-classed easily to make a customized data container which can handle new types of data frames. To create a custom data container, ensure you have a class which conforms to the <a class="reference internal" href="api.html#astroobjectapi"><em>AstroObject API</em></a> (called a <tt class="docutils literal"><span class="pre">frame</span></tt>), then simply subclass <tt class="xref py py-class docutils literal"><span class="pre">AstroObjectBase.FITSObject</span></tt> and provide the <tt class="docutils literal"><span class="pre">frame</span></tt> to <tt class="xref py py-attr docutils literal"><span class="pre">FITSObject.dataclasses</span></tt>. For example, if <tt class="xref py py-class docutils literal"><span class="pre">FooFrame</span></tt> conforms to the <a class="reference internal" href="api.html#astroobjectapi"><em>AstroObject API</em></a>, then you could use:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">FooObject</span><span class="p">(</span><span class="n">AstroObjectBase</span><span class="o">.</span><span class="n">FITSObject</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A container for tracking FooFrames&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">array</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ImageObject</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dataClasses</span> <span class="o">+=</span> <span class="p">[</span><span class="n">FooFrame</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dataClasses</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">AstroObjectBase</span><span class="o">.</span><span class="n">FITSFrame</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">array</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">array</span><span class="p">)</span>        <span class="c"># Save the initializing data</span>
</pre></div>
</div>
<p>This object will then have all of the functions provided by <tt class="xref py py-class docutils literal"><span class="pre">AstroObjectBase.FITSObject</span></tt>, but will only accept and handle data of type <tt class="xref py py-class docutils literal"><span class="pre">FooFrame</span></tt>. <tt class="xref py py-class docutils literal"><span class="pre">FooFrame</span></tt> should then implement all of the functions described in the <a class="reference internal" href="api.html#astroobjectapi"><em>AstroObject API</em></a>.</p>
<dl class="class">
<dt id="AstroObject.AstroObjectBase.FITSObject">
<em class="property">class </em><tt class="descclassname">AstroObject.AstroObjectBase.</tt><tt class="descname">FITSObject</tt><big>(</big><em>filename=None</em>, <em>dataClasses=None</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="_modules/AstroObject/AstroObjectBase.html#FITSObject"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AstroObject.AstroObjectBase.FITSObject" title="Permalink to this definition">¶</a></dt>
<dd><p>This object tracks a number of data frames. The <tt class="xref py py-attr docutils literal"><span class="pre">Filename</span></tt> is the default filename to use when reading and writing, and the <tt class="xref py py-attr docutils literal"><span class="pre">dataClass</span></tt> argument accepts a list of new data classes to be used with this object. New data classes should conform to the data class standard.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>filename</strong> &#8211; String name of default file for reading and writing with <a class="reference internal" href="#AstroObject.AstroObjectBase.FITSObject.read" title="AstroObject.AstroObjectBase.FITSObject.read"><tt class="xref py py-meth docutils literal"><span class="pre">read()</span></tt></a> and <a class="reference internal" href="#AstroObject.AstroObjectBase.FITSObject.write" title="AstroObject.AstroObjectBase.FITSObject.write"><tt class="xref py py-meth docutils literal"><span class="pre">write()</span></tt></a>.</li>
<li><strong>dataClasses</strong> &#8211; An array of classes which constitute valid save classes for this object.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This is object only contains Abstract data objects. In order to use this class properly, you should set the dataClasses keyword for use when storing data.</p>
</div>
<dl class="method">
<dt id="AstroObject.AstroObjectBase.FITSObject.clear">
<tt class="descname">clear</tt><big>(</big><em>delete=False</em><big>)</big><a class="reference internal" href="_modules/AstroObject/AstroObjectBase.html#FITSObject.clear"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AstroObject.AstroObjectBase.FITSObject.clear" title="Permalink to this definition">¶</a></dt>
<dd><p>Clears all states from this object. Returns an empty list representing the currently known states.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>delete</strong> (<em>bool</em>) &#8211; whether to explicitly delete states or just stop referencing dictionary.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">list of states remaining</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="AstroObject.AstroObjectBase.FITSObject.data">
<tt class="descname">data</tt><big>(</big><em>statename=None</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="_modules/AstroObject/AstroObjectBase.html#FITSObject.data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AstroObject.AstroObjectBase.FITSObject.data" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the raw data for the current state. This is done through the <a class="reference internal" href="#AstroObject.AstroObjectBase.FITSFrame.__call__" title="AstroObject.AstroObjectBase.FITSFrame.__call__"><tt class="xref py py-meth docutils literal"><span class="pre">FITSFrame.__call__()</span></tt></a> method, which should return basic data in as raw a form as possible. The purpose of this call is to allow the user get at the most recent piece of data as easily as possible.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>statename</strong> (<em>string</em>) &#8211; the name of the state to be retrieved.</li>
<li><strong>kwargs</strong> &#8211; arguments to be passed to the data call.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">np.array of called data</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">I have not finished examining some issues with referencing vs. copying data that comes out of this call. Be aware that manipulating some objects produced here may actually manipulate the version saved in the Object. The current implementation which protects this call relies on the numpy copy command, <tt class="docutils literal"><span class="pre">np.copy(state())</span></tt>, which might fail when used with data objects that do not return numpy arrays.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="AstroObject.AstroObjectBase.FITSObject.frame">
<tt class="descname">frame</tt><big>(</big><em>statename=None</em><big>)</big><a class="reference internal" href="_modules/AstroObject/AstroObjectBase.html#FITSObject.frame"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AstroObject.AstroObjectBase.FITSObject.frame" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the FITSFrame Specfied. This method give you the raw frame object to play with, and can be useful for transferring frames around, or if your API is built to work with frames rather than raw data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>statename</strong> (<em>string</em>) &#8211; the name of the state to be retrieved.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">dataClass instance for this object</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>Unlike with the <a class="reference internal" href="#AstroObject.AstroObjectBase.FITSObject.data" title="AstroObject.AstroObjectBase.FITSObject.data"><tt class="xref py py-meth docutils literal"><span class="pre">FITSObject.data()</span></tt></a> call, the object returned here should be treated as roughly immutable. That is, it is not advisable to re-use the data frame here, as Python has returned a reference to all examples of this data frame in your code:</p>
<div class="last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span> <span class="o">=</span> <span class="n">FITSObject</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">FITSFrame</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span><span class="s">&quot;Label&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Frame</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">frame</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Frame</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="s">&quot;Other&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span><span class="o">.</span><span class="n">frame</span><span class="p">()</span><span class="o">.</span><span class="n">label</span>
<span class="go">&quot;Other&quot;</span>
</pre></div>
</div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Using frames can be advantageous as you don&#8217;t rely on the Object to guess what type of frame should be used. Most times, the object will guess correctly, but Frames are a more robust way of ensuring type consistency</p>
</div>
</dd></dl>

<dl class="method">
<dt id="AstroObject.AstroObjectBase.FITSObject.keep">
<tt class="descname">keep</tt><big>(</big><em>*statenames</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="_modules/AstroObject/AstroObjectBase.html#FITSObject.keep"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AstroObject.AstroObjectBase.FITSObject.keep" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes all states except the specified frame(s) in the object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>statenames</strong> &#8211; the statenames to be kept.</li>
<li><strong>delete</strong> (<em>bool</em>) &#8211; whether to explicitly delete stages.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">list of states remaining.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="AstroObject.AstroObjectBase.FITSObject.keys">
<tt class="descname">keys</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/AstroObject/AstroObjectBase.html#FITSObject.keys"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AstroObject.AstroObjectBase.FITSObject.keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Dictionary keys.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">list</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="AstroObject.AstroObjectBase.FITSObject.list">
<tt class="descname">list</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/AstroObject/AstroObjectBase.html#FITSObject.list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AstroObject.AstroObjectBase.FITSObject.list" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides a list of the available frames, by label.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">list</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="AstroObject.AstroObjectBase.FITSObject.read">
<tt class="descname">read</tt><big>(</big><em>filename=None</em>, <em>statename=None</em><big>)</big><a class="reference internal" href="_modules/AstroObject/AstroObjectBase.html#FITSObject.read"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AstroObject.AstroObjectBase.FITSObject.read" title="Permalink to this definition">¶</a></dt>
<dd><p>This reader takes a FITS file, and trys to render each HDU within that FITS file as a frame in this Object. As such, it might read multiple frames. This method will return a list of Frames that it read. It uses the <tt class="xref py py-attr docutils literal"><span class="pre">dataClasses</span></tt> <a class="reference internal" href="#AstroObject.AstroObjectBase.FITSFrame.__read__" title="AstroObject.AstroObjectBase.FITSFrame.__read__"><tt class="xref py py-meth docutils literal"><span class="pre">FITSFrame.__read__()</span></tt></a> method to return a valid Frame object for each HDU.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span> <span class="o">=</span> <span class="n">FITSObject</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s">&quot;SomeImage.fits&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
<span class="go">[&quot;SomeImage&quot;,&quot;SomeImage Frame 1&quot;,&quot;SomeImage Frame 2&quot;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="AstroObject.AstroObjectBase.FITSObject.remove">
<tt class="descname">remove</tt><big>(</big><em>*statenames</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="_modules/AstroObject/AstroObjectBase.html#FITSObject.remove"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AstroObject.AstroObjectBase.FITSObject.remove" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes the specified frame(s) from the object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>statenames</strong> &#8211; the statenames to be deleted.</li>
<li><strong>delete</strong> (<em>bool</em>) &#8211; whether to explicitly delete stages.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">list of states remaining.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="AstroObject.AstroObjectBase.FITSObject.save">
<tt class="descname">save</tt><big>(</big><em>data</em>, <em>statename=None</em>, <em>clobber=False</em><big>)</big><a class="reference internal" href="_modules/AstroObject/AstroObjectBase.html#FITSObject.save"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AstroObject.AstroObjectBase.FITSObject.save" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves the given data to this object. If the data is an instance of one of the acceptable <tt class="xref py py-attr docutils literal"><span class="pre">dataClasses</span></tt> then this method will simply save the data. Otherwise, it will attempt to cast the data into one of the acceptable <tt class="xref py py-attr docutils literal"><span class="pre">dataClasses</span></tt> using their <tt class="xref py py-meth docutils literal"><span class="pre">__save__()</span></tt> mehtod.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>data</strong> &#8211; Data, typed like one of the data classes, or data which could initialize one of those classes.</li>
<li><strong>statename</strong> (<em>string</em>) &#8211; The label name to use for this data.</li>
<li><strong>clobber</strong> (<em>bool</em>) &#8211; Whether to overwrite the destination label or raise an error.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises :</th><td class="field-body"><p class="first"><tt class="xref py py-exc docutils literal"><span class="pre">TypeError</span></tt> when the data cannot be cast as any dataClass</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises :</th><td class="field-body"><p class="first last"><tt class="xref py py-exc docutils literal"><span class="pre">KeyError</span></tt> when the data would overwrite an existing frame.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="AstroObject.AstroObjectBase.FITSObject.select">
<tt class="descname">select</tt><big>(</big><em>statename</em><big>)</big><a class="reference internal" href="_modules/AstroObject/AstroObjectBase.html#FITSObject.select"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AstroObject.AstroObjectBase.FITSObject.select" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the default frame to the given statename. Normally, the default frame is the one that was last saved.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>statename</strong> (<em>string</em>) &#8211; the name of the state to be selected.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="AstroObject.AstroObjectBase.FITSObject.show">
<tt class="descname">show</tt><big>(</big><em>statename=None</em><big>)</big><a class="reference internal" href="_modules/AstroObject/AstroObjectBase.html#FITSObject.show"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AstroObject.AstroObjectBase.FITSObject.show" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the (rendered) matplotlib plot for this object. This is a quick way to view your current data state without doing any serious plotting work. This aims for the sensible defaults philosophy, if you don&#8217;t like what you get, write a new method that uses the <a class="reference internal" href="#AstroObject.AstroObjectBase.FITSObject.data" title="AstroObject.AstroObjectBase.FITSObject.data"><tt class="xref py py-meth docutils literal"><span class="pre">data()</span></tt></a> call and plots that.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>statename</strong> (<em>string</em>) &#8211; the name of the state to be retrieved.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="AstroObject.AstroObjectBase.FITSObject.write">
<tt class="descname">write</tt><big>(</big><em>filename=None</em>, <em>states=None</em>, <em>primaryState=None</em>, <em>clobber=False</em><big>)</big><a class="reference internal" href="_modules/AstroObject/AstroObjectBase.html#FITSObject.write"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AstroObject.AstroObjectBase.FITSObject.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes a FITS file for this object. Generally, the FITS file will include all frames curretnly available in the system. If you specify <tt class="docutils literal"><span class="pre">states</span></tt> then only those states will be used. <tt class="docutils literal"><span class="pre">primaryState</span></tt> should be the state of the front HDU. When not specified, the latest state will be used. It uses the <tt class="xref py py-attr docutils literal"><span class="pre">dataClasses</span></tt> <a class="reference internal" href="#AstroObject.AstroObjectBase.FITSFrame.__hdu__" title="AstroObject.AstroObjectBase.FITSFrame.__hdu__"><tt class="xref py py-meth docutils literal"><span class="pre">FITSFrame.__hdu__()</span></tt></a> method to return a valid HDU object for each Frame.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>filename</strong> (<em>string</em>) &#8211; the name of the file for saving.</li>
<li><strong>states</strong> (<em>list</em>) &#8211; A list of states to include in the file. If <tt class="docutils literal"><span class="pre">None</span></tt>, save all states.</li>
<li><strong>primaryState</strong> (<em>string</em>) &#8211; The state to become the front of the FITS file. If none, uses <tt class="xref py py-meth docutils literal"><span class="pre">_default_state()</span></tt></li>
<li><strong>clobber</strong> (<em>bool</em>) &#8211; Whether to overwrite the destination file or not.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="custom-frame-basics-fitsframe">
<h1>5. Custom Frame Basics <a class="reference internal" href="#AstroObject.AstroObjectBase.FITSFrame" title="AstroObject.AstroObjectBase.FITSFrame"><tt class="xref py py-class docutils literal"><span class="pre">FITSFrame</span></tt></a><a class="headerlink" href="#custom-frame-basics-fitsframe" title="Permalink to this headline">¶</a></h1>
<p>AstroObjectBase provides template objects for the Object-Oriented Modules <tt class="xref py py-mod docutils literal"><span class="pre">AstroImage</span></tt> and <tt class="xref py py-mod docutils literal"><span class="pre">AstroSpectra</span></tt>. Template classes implement all of the required methods. However, calling a method defined by a template class will usually raise an <tt class="xref py py-exc docutils literal"><span class="pre">AbstractError</span></tt> indicating that an Abstract method was called. If you intend to work with <tt class="docutils literal"><span class="pre">.fits</span></tt> files directly, then you should subclass <a class="reference internal" href="#AstroObject.AstroObjectBase.FITSFrame" title="AstroObject.AstroObjectBase.FITSFrame"><tt class="xref py py-class docutils literal"><span class="pre">FITSFrame</span></tt></a>. If not, subclass <a class="reference internal" href="api.html#AstroObject.AstroObjectBase.BaseFrame" title="AstroObject.AstroObjectBase.BaseFrame"><tt class="xref py py-class docutils literal"><span class="pre">BaseFrame</span></tt></a>, which is purely abstract, and makes no assumptions about your data structure.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You should still use Template Classes even though they really only raise abstract errors. This helps you to ensure that you have implemented all of the required methods. As well, if new methods are added to the APIs in the future, using the Abstract class will likely cause your program to fail quietly on these new API calls, allowing you to mix old and new code with out too much concern for what has changed.</p>
</div>
<dl class="class">
<dt id="AstroObject.AstroObjectBase.FITSFrame">
<em class="property">class </em><tt class="descclassname">AstroObject.AstroObjectBase.</tt><tt class="descname">FITSFrame</tt><big>(</big><em>data=None</em>, <em>label=None</em>, <em>header=None</em>, <em>metadata=None</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="_modules/AstroObject/AstroObjectBase.html#FITSFrame"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AstroObject.AstroObjectBase.FITSFrame" title="Permalink to this definition">¶</a></dt>
<dd><p>A single frame of a FITS image.
Frames are known as Header Data Units, or HDUs when written to a FITS file.
This frame is generic. It does not legitimately implement any functions. Rather, each function implemented is a placeholder, and will generate an <tt class="xref py py-exc docutils literal"><span class="pre">AbstractError</span></tt> if called. Several objects inherit from this one to create HDUs which have some semantic meaning.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>data</strong> (<em>None</em>) &#8211; The data to be saved.</li>
<li><strong>label</strong> (<em>string</em>) &#8211; A string name for this frame</li>
<li><strong>header</strong> &#8211; pyfits.header or dictionary of header options</li>
<li><strong>metadata</strong> &#8211; dictionary of arbitrary metadata</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This is an abstract object. Methods implemented here will <em>likely</em> raise an <tt class="xref py py-exc docutils literal"><span class="pre">AbstractError</span></tt> indicating that you shouldn&#8217;t be using these methods. This class is provided so that users can sub-class it for their own purposes. It also serves as the base class for other Frames in this package.</p>
</div>
<dl class="method">
<dt id="AstroObject.AstroObjectBase.FITSFrame.__call__">
<tt class="descname">__call__</tt><big>(</big><em>**kwargs</em><big>)</big><a class="headerlink" href="#AstroObject.AstroObjectBase.FITSFrame.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>Should return the data within this frame, usually as a <tt class="docutils literal"><span class="pre">numpy</span></tt> array.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">None</td>
</tr>
</tbody>
</table>
<p><tt class="xref py py-class docutils literal"><span class="pre">AstroImage.ImageFrame</span></tt> implements this method as:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="AstroObject.AstroObjectBase.FITSFrame.__repr__">
<tt class="descname">__repr__</tt><big>(</big><big>)</big><a class="headerlink" href="#AstroObject.AstroObjectBase.FITSFrame.__repr__" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns String Representation of this frame object. Will display the class name and the label. This method does not need to be overwritten by subclasses.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">literal sting representation</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="AstroObject.AstroObjectBase.FITSFrame.__valid__">
<tt class="descname">__valid__</tt><big>(</big><big>)</big><a class="headerlink" href="#AstroObject.AstroObjectBase.FITSFrame.__valid__" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs a series of assertions which ensure that the data for this frame is valid</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises :</th><td class="field-body"><tt class="xref py py-exc docutils literal"><span class="pre">AssertionError</span></tt> when frame is invalid</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><tt class="docutils literal"><span class="pre">None</span></tt></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="AstroObject.AstroObjectBase.FITSFrame.__hdu__">
<tt class="descname">__hdu__</tt><big>(</big><em>primary=False</em><big>)</big><a class="reference internal" href="_modules/AstroObject/AstroObjectBase.html#FITSFrame.__hdu__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AstroObject.AstroObjectBase.FITSFrame.__hdu__" title="Permalink to this definition">¶</a></dt>
<dd><p>Retruns a Header-Data Unit PyFits object. The abstract case generates empty HDUs, which contain no data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>primary</strong> (<em>bool</em>) &#8211; Return a primary HDU</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">pyfits.primaryHDU or pyfits.ImageHDU</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="AstroObject.AstroObjectBase.FITSFrame.__show__">
<tt class="descname">__show__</tt><big>(</big><big>)</big><a class="headerlink" href="#AstroObject.AstroObjectBase.FITSFrame.__show__" title="Permalink to this definition">¶</a></dt>
<dd><p>This method should create a simple view of the provided frame. Often this is done using <tt class="xref py py-mod docutils literal"><span class="pre">Matplotlib.pyplot</span></tt> to create a simple plot. The plot should have the minimum amount of work done to make a passable plot view, but still be basic enough that the end user can customize the plot object after calling <a class="reference internal" href="#AstroObject.AstroObjectBase.FITSFrame.__show__" title="AstroObject.AstroObjectBase.FITSFrame.__show__"><tt class="xref py py-meth docutils literal"><span class="pre">__show__()</span></tt></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Matplotlib plot object</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="AstroObject.AstroObjectBase.FITSFrame.__save__">
<em class="property">classmethod </em><tt class="descname">__save__</tt><big>(</big><em>data</em>, <em>label</em><big>)</big><a class="headerlink" href="#AstroObject.AstroObjectBase.FITSFrame.__save__" title="Permalink to this definition">¶</a></dt>
<dd><p>This method should retun an instance of the parent class if the given data can be turned into an object of that class. If the data cannot be correctly cast, this method should throw an <tt class="xref py py-exc docutils literal"><span class="pre">AbstractError</span></tt>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>data</strong> &#8211; Data to be saved, in raw form.</li>
<li><strong>label</strong> &#8211; Name for the newly created frame.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises :</th><td class="field-body"><p class="first"><tt class="xref py py-exc docutils literal"><span class="pre">AbstractError</span></tt> when this data can&#8217;t be saved.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><a class="reference internal" href="api.html#AstroObject.AstroObjectBase.BaseFrame" title="AstroObject.AstroObjectBase.BaseFrame"><tt class="xref py py-class docutils literal"><span class="pre">BaseFrame</span></tt></a></p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Because the <a class="reference internal" href="#AstroObject.AstroObjectBase.FITSFrame.__valid__" title="AstroObject.AstroObjectBase.FITSFrame.__valid__"><tt class="xref py py-meth docutils literal"><span class="pre">__valid__()</span></tt></a> is called when an object is initialized, it is possible to check some aspects of the provided data in this initialization function. However, this would raise an <tt class="xref py py-exc docutils literal"><span class="pre">AssertionError</span></tt> not an <tt class="xref py py-exc docutils literal"><span class="pre">AbstractError</span></tt>. To avoid this problem, it is suggested that you wrap your initialization in a try...except block like:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">try</span><span class="p">:</span>
    <span class="n">Object</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="n">HDU</span><span class="o">.</span><span class="n">data</span><span class="p">,</span><span class="n">label</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">AssertionError</span> <span class="k">as</span> <span class="n">AE</span><span class="p">:</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s"> data did not validate: </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">__name__</span><span class="p">,</span><span class="n">AE</span><span class="p">)</span>
    <span class="k">raise</span> <span class="n">AbstractError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</pre></div>
</div>
<p class="last">This block simply changes the error type emitted from the __valid__ function. This trick is not a substituion for data validation before initializing the class. Just instantiating a class like this often results in bizzare errors (like <tt class="xref py py-exc docutils literal"><span class="pre">AttributeError</span></tt>) which are diffult to track and diagnose without the code in <a class="reference internal" href="#AstroObject.AstroObjectBase.FITSFrame.__save__" title="AstroObject.AstroObjectBase.FITSFrame.__save__"><tt class="xref py py-meth docutils literal"><span class="pre">__save__()</span></tt></a>. See <tt class="xref py py-meth docutils literal"><span class="pre">AstroImage.__save__()</span></tt> for an example <tt class="docutils literal"><span class="pre">__save__</span></tt> function which uses this trick, but also includes some basic data validation.</p>
</div>
</dd></dl>

<dl class="classmethod">
<dt id="AstroObject.AstroObjectBase.FITSFrame.__read__">
<em class="property">classmethod </em><tt class="descname">__read__</tt><big>(</big><em>HDU</em>, <em>label</em><big>)</big><a class="reference internal" href="_modules/AstroObject/AstroObjectBase.html#FITSFrame.__read__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#AstroObject.AstroObjectBase.FITSFrame.__read__" title="Permalink to this definition">¶</a></dt>
<dd><p>An abstract method for reading empty data HDU Frames.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>data</strong> &#8211; HDU to be saved, as a <tt class="docutils literal"><span class="pre">pyfits.HDU</span></tt>.</li>
<li><strong>label</strong> &#8211; Name for the newly created frame.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises :</th><td class="field-body"><p class="first"><tt class="xref py py-exc docutils literal"><span class="pre">AbstractError</span></tt> when this data can&#8217;t be saved.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><a class="reference internal" href="#AstroObject.AstroObjectBase.FITSFrame" title="AstroObject.AstroObjectBase.FITSFrame"><tt class="xref py py-class docutils literal"><span class="pre">FITSFrame</span></tt></a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">4. Custom Object Basics: <tt class="docutils literal"><span class="pre">FITSObject</span></tt></a></li>
<li><a class="reference internal" href="#custom-frame-basics-fitsframe">5. Custom Frame Basics <tt class="docutils literal"><span class="pre">FITSFrame</span></tt></a></li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="api.html"
                        title="previous chapter">3. AstroObject API</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="AstroImage.html"
                        title="next chapter">6. Image Objects and Storage <tt class="docutils literal docutils literal"><span class="pre">AstroImage</span></tt></a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/AstroObject.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="AstroImage.html" title="6. Image Objects and Storage AstroImage"
             >next</a> |</li>
        <li class="right" >
          <a href="api.html" title="3. AstroObject API"
             >previous</a> |</li>
        <li><a href="index.html">AstroObject 0.3.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011, Alexander Rudy.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.2.
    </div>
  </body>
</html>